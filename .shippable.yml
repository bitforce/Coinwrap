language: python

python: 2.7

branches:
    only: master

build:
    ci:
        - pip install --upgrade pytest-cov
        - pip install --upgrade pytest
        - pip install --upgrade cmcwrap
        - mkdir -p shippable/codecoverage
        - mkdir -p shippable/testresults
        - pytest --junitxml=shippable/nosetests.xml
        - pytest --cov=cmcwrap --cov-report=xml:shippable/coverage.xml

integrations:
    notification:
        type: irc
        recipients: "chat.freenode.net#cmcwrap"
        on_pull_request: always
        on_success: always
        on_failure: always
        on_cancel: always
        on_start: never
